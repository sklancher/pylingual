from __future__ import absolute_import, division, print_function
__metaclass__ = type
ANSIBLE_METADATA = {'status': ['preview'], 'supported_by': 'community', 'metadata_version': '1.1'}
DOCUMENTATION = '\n---\nmodule: fmgr_pkg_firewall_policy_sectionvalue\nshort_description: no description\ndescription:\n    - This module is able to configure a FortiManager device.\n    - Examples include all parameters and values which need to be adjusted to data sources before usage.\n\nversion_added: "1.0.0"\nauthor:\n    - Link Zheng (@chillancezen)\n    - Jie Xue (@JieX19)\n    - Frank Shen (@fshen01)\n    - Hongbin Lu (@fgtdev-hblu)\nnotes:\n    - Running in workspace locking mode is supported in this FortiManager module, the top\n      level parameters workspace_locking_adom and workspace_locking_timeout help do the work.\n    - To create or update an object, use state present directive.\n    - To delete an object, use state absent directive.\n    - Normally, running one module can fail when a non-zero rc is returned. you can also override\n      the conditions to fail or succeed with parameters rc_failed and rc_succeeded\n\noptions:\n    enable_log:\n        description: Enable/Disable logging for task\n        required: false\n        type: bool\n        default: false\n    proposed_method:\n        description: The overridden method for the underlying Json RPC request\n        required: false\n        type: str\n        choices:\n          - update\n          - set\n          - add\n    bypass_validation:\n        description: |\n          only set to True when module schema diffs with FortiManager API structure,\n           module continues to execute without validating parameters\n        required: false\n        type: bool\n        default: false\n    workspace_locking_adom:\n        description: |\n          the adom to lock for FortiManager running in workspace mode, the value can be global and others including root\n        required: false\n        type: str\n    workspace_locking_timeout:\n        description: the maximum time in seconds to wait for other user to release the workspace lock\n        required: false\n        type: int\n        default: 300\n    state:\n        description: the directive to create, update or delete an object\n        type: str\n        required: true\n        choices:\n          - present\n          - absent\n    rc_succeeded:\n        description: the rc codes list with which the conditions to succeed will be overriden\n        type: list\n        required: false\n    rc_failed:\n        description: the rc codes list with which the conditions to fail will be overriden\n        type: list\n        required: false\n    adom:\n        description: the parameter (adom) in requested url\n        type: str\n        required: true\n    pkg:\n        description: the parameter (pkg) in requested url\n        type: str\n        required: true\n    policy:\n        description: the parameter (policy) in requested url\n        type: str\n        required: true\n    pkg_firewall_policy_sectionvalue:\n        description: the top level parameters set\n        required: false\n        type: dict\n        suboptions:\n            attr:\n                type: str\n                description: no description\n                choices:\n                    - \'label\'\n                    - \'global-label\'\n            name:\n                type: str\n                description: no description\n\n'
EXAMPLES = '\n - hosts: fortimanager-inventory\n   collections:\n     - fortinet.fortimanager\n   connection: httpapi\n   vars:\n      ansible_httpapi_use_ssl: True\n      ansible_httpapi_validate_certs: False\n      ansible_httpapi_port: 443\n   tasks:\n    - name: no description\n      fmgr_pkg_firewall_policy_sectionvalue:\n         bypass_validation: False\n         workspace_locking_adom: <value in [global, custom adom including root]>\n         workspace_locking_timeout: 300\n         rc_succeeded: [0, -2, -3, ...]\n         rc_failed: [-2, -3, ...]\n         adom: <your own value>\n         pkg: <your own value>\n         policy: <your own value>\n         state: <value in [present, absent]>\n         pkg_firewall_policy_sectionvalue:\n            attr: <value in [label, global-label]>\n            name: <value of string>\n\n'
RETURN = '\nrequest_url:\n    description: The full url requested\n    returned: always\n    type: str\n    sample: /sys/login/user\nresponse_code:\n    description: The status of api request\n    returned: always\n    type: int\n    sample: 0\nresponse_message:\n    description: The descriptive message of the api response\n    type: str\n    returned: always\n    sample: OK.\n\n'
from ansible.module_utils.basic import AnsibleModule
from ansible.module_utils.connection import Connection
from ansible_collections.fortinet.fortimanager.plugins.module_utils.napi import NAPIManager
from ansible_collections.fortinet.fortimanager.plugins.module_utils.napi import check_galaxy_version
from ansible_collections.fortinet.fortimanager.plugins.module_utils.napi import check_parameter_bypass

def main():
    jrpc_urls = ['/pm/config/adom/{adom}/pkg/{pkg}/firewall/policy/{policy}/section value']
    perobject_jrpc_urls = ['/pm/config/adom/{adom}/pkg/{pkg}/firewall/policy/{policy}/section value']
    url_params = ['adom', 'pkg', 'policy']
    module_primary_key = 'name'
    module_arg_spec = {'enable_log': {'type': 'bool', 'required': False, 'default': False}, 'forticloud_access_token': {'type': 'str', 'required': False, 'no_log': True}, 'proposed_method': {'type': 'str', 'required': False, 'choices': ['set', 'update', 'add']}, 'bypass_validation': {'type': 'bool', 'required': False, 'default': False}, 'workspace_locking_adom': {'type': 'str', 'required': False}, 'workspace_locking_timeout': {'type': 'int', 'required': False, 'default': 300}, 'rc_succeeded': {'required': False, 'type': 'list'}, 'rc_failed': {'required': False, 'type': 'list'}, 'state': {'type': 'str', 'required': True, 'choices': ['present', 'absent']}, 'adom': {'required': True, 'type': 'str'}, 'pkg': {'required': True, 'type': 'str'}, 'policy': {'required': True, 'type': 'str'}, 'pkg_firewall_policy_sectionvalue': {'required': False, 'type': 'dict', 'revision': {'6.0.0': True, '6.2.1': True, '6.2.3': True, '6.2.5': True, '6.4.0': True, '6.4.2': True, '6.4.5': True, '7.0.0': True, '7.2.0': True}, 'options': {'attr': {'required': False, 'revision': {'6.0.0': True, '6.2.1': True, '6.2.3': True, '6.2.5': True, '6.4.0': True, '6.4.2': True, '6.4.5': True, '7.0.0': True, '7.2.0': True}, 'choices': ['label', 'global-label'], 'type': 'str'}, 'name': {'required': True, 'revision': {'6.0.0': True, '6.2.1': True, '6.2.3': True, '6.2.5': True, '6.4.0': True, '6.4.2': True, '6.4.5': True, '7.0.0': True, '7.2.0': True}, 'type': 'str'}}}}
    params_validation_blob = []
    check_galaxy_version(module_arg_spec)
    module = AnsibleModule(argument_spec=check_parameter_bypass(module_arg_spec, 'pkg_firewall_policy_sectionvalue'), supports_check_mode=False)
    fmgr = None
    if module._socket_path:
        connection = Connection(module._socket_path)
        connection.set_option('enable_log', module.params['enable_log'] if 'enable_log' in module.params else False)
        connection.set_option('forticloud_access_token', module.params['forticloud_access_token'] if 'forticloud_access_token' in module.params else None)
        fmgr = NAPIManager(jrpc_urls, perobject_jrpc_urls, module_primary_key, url_params, module, connection, top_level_schema_name='data')
        fmgr.validate_parameters(params_validation_blob)
        fmgr.process_curd(argument_specs=module_arg_spec)
    else:
        module.fail_json(msg='MUST RUN IN HTTPAPI MODE')
    module.exit_json(meta=module.params)
if __name__ == '__main__':
    main()